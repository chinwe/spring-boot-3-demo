
# 变量
@host = http://localhost:8080

GET {{host}}/test/hello

###

POST {{host}}/test/echo
Content-Type:  application/json

{
    "name": "tom"
}

###

###

POST {{host}}/test/delay
Content-Type:  application/json

{
    "second": 0
}

###

POST {{host}}/test/jooq
Content-Type:  application/json

###

GET {{host}}/test/user
Content-Type:  application/json

###

# Async Servlet Examples

# CompletableFuture Example - Basic
GET {{host}}/async/completable-future/basic-task

###

# CompletableFuture Example - With custom delay
GET {{host}}/async/completable-future/custom-task?delaySeconds=3&shouldFail=false

###

# CompletableFuture Example - Simulate failure
GET {{host}}/async/completable-future/failing-task?delaySeconds=2&shouldFail=true

###

# DeferredResult Example - Basic
POST {{host}}/async/deferred-result
Content-Type: application/json

{
    "taskName": "deferred-basic-task",
    "delaySeconds": 4,
    "shouldFail": false
}

###

# DeferredResult Example - With failure simulation
POST {{host}}/async/deferred-result
Content-Type: application/json

{
    "taskName": "deferred-failing-task",
    "delaySeconds": 2,
    "shouldFail": true
}

###

# DeferredResult Example - Validation error (should fail)
POST {{host}}/async/deferred-result
Content-Type: application/json

{
    "taskName": "",
    "delaySeconds": 35,
    "shouldFail": false
}

###

# Callable Example - Basic
GET {{host}}/async/callable/3

###

# Callable Example - Quick response
GET {{host}}/async/callable/1

###

# Concurrent Requests Example - Default (3 tasks, 5s each)
GET {{host}}/async/concurrent-test

###

# Concurrent Requests Example - Custom parameters
GET {{host}}/async/concurrent-test?taskCount=5&delaySeconds=2

###

# Concurrent Requests Example - Single task
GET {{host}}/async/concurrent-test?taskCount=1&delaySeconds=3

###

# Performance Monitoring

# Get async metrics
GET {{host}}/async/metrics

###

# Reset async metrics
POST {{host}}/async/metrics/reset

###
### 1. 基本重试示例 - 成功情况
GET {{host}}/retry/basic?shouldSucceed=true
Accept: application/json

###
### 2. 基本重试示例 - 触发重试（失败情况）
GET {{host}}/retry/basic?shouldSucceed=false
Accept: application/json

###
### 3. 基本重试示例 - 默认参数
GET {{host}}/retry/basic
Accept: application/json

###
### 4. 本地服务重试示例 - 成功情况
GET {{host}}/retry/local?shouldSucceed=true
Accept: application/json

###
### 5. 本地服务重试示例 - 触发重试（失败情况）
GET {{host}}/retry/local?shouldSucceed=false
Accept: application/json

###
### 6. 本地服务重试示例 - 默认参数
GET {{host}}/retry/local
Accept: application/json

###
### 7. 远程服务重试示例 - 成功情况
GET {{host}}/retry/remote?shouldSucceed=true
Accept: application/json

###
### 8. 远程服务重试示例 - 触发重试（失败情况）
GET {{host}}/retry/remote?shouldSucceed=false
Accept: application/json

###
### 9. 远程服务重试示例 - 默认参数
GET {{host}}/retry/remote
Accept: application/json

###
### 10. 条件重试示例 - 临时异常（会重试）
GET {{host}}/retry/conditional?exceptionType=temporary
Accept: application/json

###
### 11. 条件重试示例 - 网络异常（会重试）
GET {{host}}/retry/conditional?exceptionType=network
Accept: application/json

###
### 12. 条件重试示例 - 业务异常（不会重试）
GET {{host}}/retry/conditional?exceptionType=business
Accept: application/json

###
### 13. 条件重试示例 - 默认参数
GET {{host}}/retry/conditional
Accept: application/json

###
### 14. 编程式重试示例 - 成功情况
GET {{host}}/retry/imperative?shouldSucceed=true
Accept: application/json

###
### 15. 编程式重试示例 - 触发重试（失败情况）
GET {{host}}/retry/imperative?shouldSucceed=false
Accept: application/json

###
### 16. 编程式重试示例 - 默认参数
GET {{host}}/retry/imperative
Accept: application/json

###
### 17. SpEL表达式重试示例 - 成功情况，普通优先级
GET {{host}}/retry/spel?shouldSucceed=true&priority=normal
Accept: application/json

###
### 18. SpEL表达式重试示例 - 失败情况，普通优先级
GET {{host}}/retry/spel?shouldSucceed=false&priority=normal
Accept: application/json

###
### 19. SpEL表达式重试示例 - 成功情况，关键优先级
GET {{host}}/retry/spel?shouldSucceed=true&priority=critical
Accept: application/json

###
### 20. SpEL表达式重试示例 - 失败情况，关键优先级（更多重试次数）
GET {{host}}/retry/spel?shouldSucceed=false&priority=critical
Accept: application/json

###
### 21. SpEL表达式重试示例 - 默认参数
GET {{host}}/retry/spel
Accept: application/json

###
### 22. 重置计数器
POST {{host}}/retry/reset
Accept: application/json

###
### 23. 执行所有重试示例
GET {{host}}/retry/all-examples
Accept: application/json

###
### =================
### 组合测试场景
### =================

###
### 24. 完整测试流程 - 先重置，再测试各种场景
POST {{host}}/retry/reset

###
### 25. 测试基本重试功能
GET {{host}}/retry/basic?shouldSucceed=false

###
### 26. 测试条件重试 - 临时异常
GET {{host}}/retry/conditional?exceptionType=temporary

###
### 27. 测试SpEL重试 - 关键优先级
GET {{host}}/retry/spel?shouldSucceed=false&priority=critical

###
### 28. 最终重置
POST {{host}}/retry/reset

###
### =================
### 性能和压力测试
### =================

###
### 29. 快速连续调用测试（观察重试计数）
GET {{host}}/retry/basic?shouldSucceed=false

###
### 30. 重复上次调用
GET {{host}}/retry/basic?shouldSucceed=false

###
### 31. 重复上次调用
GET {{host}}/retry/basic?shouldSucceed=false

###
### 32. 查看所有示例结果
GET {{host}}/retry/all-examples

###
### =================
### 错误边界测试
### =================

###
### 33. 测试无效的异常类型
GET {{host}}/retry/conditional?exceptionType=invalid

###
### 34. 测试无效的优先级
GET {{host}}/retry/spel?shouldSucceed=false&priority=invalid

###
### 35. 测试空参数
GET {{host}}/retry/conditional?exceptionType=

###
### 36. 测试空优先级
GET {{host}}/retry/spel?priority=

###

### =================
### Orika 对象映射接口
### =================

### 37. 基础对象映射
GET {{host}}/orika/user

###

### 38. 复杂对象映射
GET {{host}}/orika/order

###

### 39. 集合映射（默认3个订单）
GET {{host}}/orika/orders

###

### 40. 集合映射（自定义数量）
GET {{host}}/orika/orders?count=5

###

### 41. 批量映射
POST {{host}}/orika/batch
Content-Type: application/json

[
    {
        "id": 1,
        "orderNumber": "ORD-2025-001",
        "totalAmount": 2999.99,
        "status": "PROCESSING",
        "customer": {
            "id": 1,
            "firstName": "张",
            "lastName": "三",
            "email": "zhangsan@example.com"
        }
    },
    {
        "id": 2,
        "orderNumber": "ORD-2025-002",
        "totalAmount": 1599.99,
        "status": "PENDING",
        "customer": {
            "id": 2,
            "firstName": "李",
            "lastName": "四",
            "email": "lisi@example.com"
        }
    }
]

###

### =================
### JOOQ 电商系统接口
### =================

### =================
### 用户管理接口
### =================

### 42. 创建用户
POST {{host}}/api/jooq/users
Content-Type: application/json

{
    "username": "testuser",
    "email": "testuser@example.com",
    "phone": "13800138000"
}

###

### 43. 查询用户
GET {{host}}/api/jooq/users/1

###

### 44. 查询所有用户
GET {{host}}/api/jooq/users

###

### 45. 根据用户名查询
GET {{host}}/api/jooq/users/username/testuser

###

### =================
### 商品管理接口
### =================

### 46. 创建商品
POST {{host}}/api/jooq/products
Content-Type: application/json

{
    "name": "笔记本电脑",
    "description": "高性能游戏本",
    "price": 5999.99,
    "stock": 100,
    "category": "电子产品"
}

###

### 47. 批量创建商品
POST {{host}}/api/jooq/products/batch
Content-Type: application/json

[
    {
        "name": "无线鼠标",
        "description": "人体工学设计",
        "price": 99.99,
        "stock": 500,
        "category": "电子产品"
    },
    {
        "name": "机械键盘",
        "description": "青轴背光",
        "price": 299.99,
        "stock": 300,
        "category": "电子产品"
    },
    {
        "name": "显示器",
        "description": "27寸4K显示器",
        "price": 1999.99,
        "stock": 50,
        "category": "电子产品"
    }
]

###

### 48. 查询商品
GET {{host}}/api/jooq/products/1

###

### 49. 按分类查询商品（默认分页）
GET {{host}}/api/jooq/products?category=电子产品

###

### 50. 按分类查询商品（自定义分页）
GET {{host}}/api/jooq/products?category=电子产品&page=0&size=5

###

### 51. 查询低库存商品
GET {{host}}/api/jooq/products/low-stock?threshold=50

###

### 52. 查询分类库存统计
GET {{host}}/api/jooq/products/stock/电子产品

###

### =================
### 订单管理接口
### =================

### 53. 创建订单（需要先创建用户和商品）
POST {{host}}/api/jooq/orders
Content-Type: application/json

{
    "userId": 1,
    "orderNumber": "ORD-2025-001",
    "items": [
        {
            "productId": 1,
            "quantity": 1
        },
        {
            "productId": 2,
            "quantity": 2
        }
    ],
    "remarks": "请尽快发货"
}

###

### 54. 查询订单详情
GET {{host}}/api/jooq/orders/1

###

### 55. 查询用户订单
GET {{host}}/api/jooq/users/1/orders

###

### 56. 订单统计
GET {{host}}/api/jooq/orders/statistics

###

### =================
### Java 25 虚拟线程接口
### =================

### =================
### 基础虚拟线程
### =================

### 57. 执行基础虚拟线程任务
GET {{host}}/api/virtual/basic-task

###

### 58. 执行基础虚拟线程任务（自定义参数）
GET {{host}}/api/virtual/basic-task?taskName=MyTask&delayMillis=500

###

### 59. 批量执行虚拟线程任务
GET {{host}}/api/virtual/batch-tasks

###

### 60. 批量执行虚拟线程任务（自定义参数）
GET {{host}}/api/virtual/batch-tasks?taskCount=500&delayMillis=100

###

### 61. 模拟 Pin 场景
GET {{host}}/api/virtual/simulate-pinning

###

### =================
### Pin 检测
### =================

### 62. 检测 Pin 线程事件
GET {{host}}/api/virtual/pin-detection

###

### 63. 测试 Pin 场景 - SYNCHRONIZED
POST {{host}}/api/virtual/pin-test?pinType=SYNCHRONIZED

###

### 64. 测试 Pin 场景 - NATIVE
POST {{host}}/api/virtual/pin-test?pinType=NATIVE

###

### 65. 测试 Pin 场景 - FILE_IO
POST {{host}}/api/virtual/pin-test?pinType=FILE_IO

###

### =================
### ScopedValue
### =================

### 66. 演示 ScopedValue
GET {{host}}/api/virtual/scoped-value

###

### 67. 对比 ThreadLocal 与 ScopedValue
GET {{host}}/api/virtual/scoped-value-comparison

###

### =================
### 结构化并发
### =================

### 68. 执行结构化并发任务 - JOIN_ALL
POST {{host}}/api/virtual/structured-concurrency?strategy=JOIN_ALL

###

### 69. 执行结构化并发任务 - SHUTDOWN_ON_SUCCESS
POST {{host}}/api/virtual/structured-concurrency?strategy=SHUTDOWN_ON_SUCCESS

###

### 70. 执行结构化并发任务 - ERROR_HANDLING
POST {{host}}/api/virtual/structured-concurrency?strategy=ERROR_HANDLING

###

### 71. 演示 ShutdownOnSuccess
GET {{host}}/api/virtual/structured-concurrency/shutdown-on-success

###

### 72. 演示错误处理
GET {{host}}/api/virtual/structured-concurrency/error-handling

###

### =================
### 性能测试
### =================

### 73. 性能对比测试（默认参数）
GET {{host}}/api/virtual/performance-comparison

###

### 74. 性能对比测试（小规模）
GET {{host}}/api/virtual/performance-comparison?taskCount=100&delayMillis=10

###

### 75. 性能对比测试（大规模）
GET {{host}}/api/virtual/performance-comparison?taskCount=10000&delayMillis=5

###

### =================
### 综合演示
### =================

### 76. 综合演示所有功能
GET {{host}}/api/virtual/demo-all